const { DataTypes } = require('sequelize');const { sequelize } = require('../config/sequelize');const bcrypt = require('bcryptjs');const Usuario = sequelize.define('Usuario', {  id_usuario: {    type: DataTypes.INTEGER,    primaryKey: true,    autoIncrement: true,    field: 'id_usuario'  },  nombre: {    type: DataTypes.STRING(100),    allowNull: false,    validate: {      notEmpty: {        msg: 'El nombre es requerido'      },      len: {        args: [2, 100],        msg: 'El nombre debe tener entre 2 y 100 caracteres'      }    }  },  email: {    type: DataTypes.STRING(100),    allowNull: false,    unique: {      name: 'email_unique',      msg: 'Este email ya est치 registrado'    },    validate: {      isEmail: {        msg: 'Debe ser un email v치lido'      },      notEmpty: {        msg: 'El email es requerido'      }    }  },  password: {    type: DataTypes.STRING(255),    allowNull: false,    validate: {      notEmpty: {        msg: 'La contrase침a es requerida'      },      len: {        args: [6, 255],        msg: 'La contrase침a debe tener al menos 6 caracteres'      }    }  },  id_sucursal: {    type: DataTypes.INTEGER,    allowNull: true,    field: 'id_sucursal',    references: {      model: 'sucursales',      key: 'id_sucursal'    }  },  activo: {    type: DataTypes.BOOLEAN,    defaultValue: true  },  createdAt: {    type: DataTypes.DATE,    defaultValue: DataTypes.NOW  },  updatedAt: {    type: DataTypes.DATE,    defaultValue: DataTypes.NOW  }}, {  tableName: 'usuarios',  timestamps: true,  hooks: {    beforeCreate: async (usuario) => {      if (usuario.password) {        const salt = await bcrypt.genSalt(10);        usuario.password = await bcrypt.hash(usuario.password, salt);      }    },    beforeUpdate: async (usuario) => {      if (usuario.changed('password')) {        const salt = await bcrypt.genSalt(10);        usuario.password = await bcrypt.hash(usuario.password, salt);      }    }  }});Usuario.prototype.comparePassword = async function(password) {  return await bcrypt.compare(password, this.password);};Usuario.prototype.toJSON = function() {  const values = { ...this.get() };  delete values.password;  return values;};module.exports = Usuario;